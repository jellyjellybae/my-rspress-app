"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["8005"],{527:function(e,n,t){t.r(n),t.d(n,{default:()=>p});var r=t(6773),d=t(453);function o(e){let n=Object.assign({h1:"h1",a:"a",pre:"pre",code:"code",h3:"h3",p:"p",ul:"ul",li:"li"},(0,d.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"mini-react",children:["mini-react",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mini-react",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"## 在页面实现 app\n\n```js\nconsole.log('main.js')\nconst dom = document.createElement('div')\ndom.id = 'app'\nconst rootEl = document.querySelector('#root')\nrootEl.append(dom)\n\nconst textNode = document.createTextNode('')\ntextNode.nodeValue = 'hello'\ndom.append(textNode)\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"vdom-js-object",children:["vdom js object",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vdom-js-object",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"type props children"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const el = {\n  type: 'div',\n  props: {\n    children: [\n      {\n        type: 'TEXT_ELEMENT',\n        props: {\n          nodeValue: 'app',\n          children:[]\n        }\n      }\n    ]\n  }\n}\n//promote\nconst el = {\n  type: 'div',\n  props: {\n    children: [textEL]\n  }\n}\nconst textEL = {\n  type: 'TEXT_ELEMENT',\n  props: {\n    nodeValue: 'app',\n    children: []\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"修改抽离一小部分",children:["修改抽离一小部分",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#修改抽离一小部分",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const textEL = {\n  type: 'TEXT_ELEMENT',\n  props: {\n    nodeValue: '\uD83E\uDD8Bapp',\n    children: []\n  }\n}\nconst el = {\n  type: 'div',\n  props: {\n    id:'app',\n    children: [textEL]\n  }\n}\n\nconst dom = document.createElement(el.type)\ndom.id = el.props.id\nconst rootEl = document.querySelector('#root')\nrootEl.append(dom)\n\nconst textNode = document.createTextNode('')\ntextNode.nodeValue = textEL.props.nodeValue\ndom.append(textNode)\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"动态创建dom",children:["动态创建DOM",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#动态创建dom",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function createTextNode (text) {\n  return {\n    type: 'TEXT_ELEMENT',\n    props: {\n      nodeValue: text,\n      children: []\n    }\n  }\n}\n\nfunction createElement (type, props, ...children) {\n  return {\n    type,\n    props: {\n      ...props,\n      children\n    }\n  }\n}\nconst textEl = createTextNode('\uD83E\uDD8Bapp')\nconst App = createElement('div', { id: 'app' }, textEl)\n\nconst dom = document.createElement(App.type)\ndom.id = App.props.id\nconst rootEl = document.querySelector('#root')\nrootEl.append(dom)\n\nconst textNode = document.createTextNode('')\ntextNode.nodeValue = textEl.props.nodeValue\ndom.append(textNode)\n\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"创建render函数",children:["创建render函数",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建render函数",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function createTextNode (text) {\n  return {\n    type: 'TEXT_ELEMENT',\n    props: {\n      nodeValue: text,\n      children: []\n    }\n  }\n}\n\nfunction createElement (type, props, ...children) {\n  return {\n    type,\n    props: {\n      ...props,\n      children\n    }\n  }\n}\n/**\n *\n * @param {*} el\n * @param {*} container\n * 1. 创建 element\n *\n * 2. props\n * 3. append\n */\nfunction render (el, container) {\n  const dom = el.type === 'TEXT_ELEMENT' ? document.createTextNode('') : document.createElement(el.type)\n  //props  id class 遍历\n  Object.keys(el.props).forEach(key => {\n    if(key!==\"children\"){\n      dom[key] = el.props[key]\n    }\n  })\n  const children = el.props.children\n  children.forEach(child => {\n    render(child, dom)\n  })\n\n  container.append(dom)\n}\nconst textEl = createTextNode('\uD83E\uDD8Bapp')\nconst App = createElement('div', { id: 'app' }, textEl)\n\nrender(App, document.querySelector('#root'))\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"优化"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"...\nfunction createElement (type, props, ...children) {\n  return {\n    type,\n    props: {\n      ...props,\n      children: children.map(child => typeof child === 'object' ? child : createTextNode(child))\n    }\n  }\n}\n...\nconst App = createElement('div', { id: 'app' }, '\uD83E\uDD8Bapp')\n...\n"})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}let p=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["article%2Farticle.mdx"]={toc:[{text:"vdom js object",id:"vdom-js-object",depth:3},{text:"修改抽离一小部分",id:"修改抽离一小部分",depth:3},{text:"动态创建DOM",id:"动态创建dom",depth:3},{text:"创建render函数",id:"创建render函数",depth:3}],title:"mini-react",headingTitle:"mini-react",frontmatter:{}}}}]);